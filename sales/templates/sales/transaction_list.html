{% extends "base_generic.html" %}

{# TODO: Create layout #}

{% block content %}
    {% if transaction_list %}
        <table>
            <tr>
                <td>果物</td>
                <td>個数</td>
                <td>売り上げ</td>
                <td>販売日時</td>
                <td></td>
                <td></td>
            </tr>

            {% for transaction in transaction_list %}
                <tr>
                    <td>{{ transaction.fruit.label }}</td>
                    <td>{{ transaction.num_items }}</td>
                    <td>{{ transaction.amount }}</td>
                    <td>{{ transaction.created_at }}</td>
                    {#                    TODO: DELETE UPDATE #}
                    <td><a href="{% url 'transaction_update' transaction.pk %}">編集</a></td>
                    <td><a href="{% url 'transaction_delete' transaction.pk %}">削除</a></td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <h1>まだ販売情報は登録されていません</h1>
    {% endif %}

    <form action="" method-"post">
    {% csrf_token %}
    <button type="submit" formaction="{% url 'transaction_create' %}">販売情報登録</button>
    </form>


    {#    TODO : UPLOAD FORM BUTTON #}
    <form action="{% url "upload_csv" %}" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <label for="name">CSV一括登録</label>
            <div>
                <input type="file" name="csv_file" id="csv_file" accept="text/csv" required="True">
            </div>
        </div>
        <div class="form-group">
            <div>
                <button><span></span>CSVアップロード</button>
            </div>
        </div>
        {% if messages %}
            <p>エラー</p>
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </form>


{% endblock content %}
